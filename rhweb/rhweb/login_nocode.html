<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>监控运维管控平台</title>
	<link rel="shortcut icon" type="image/x-icon" href="icon.ico" media="screen"/>
	<script type="text/javascript" src="/js/lib/jquery/jquery.1.10.2.js"></script>
	<script type="text/javascript" src="/js/ip.js"></script>
	<script type="text/javascript" src="/js/md5.js"></script>
	<script type="text/javascript" src="/js/jquery.base64.js"></script>
	<script type="text/javascript" src="/js/lib/JsonTools.js"></script>
	<style type="text/css">
		* {
		  }
		* {
			  margin: 0;
			  padding: 0;
		}


		html, body {
		    background: #f9f9f9 none repeat scroll 0 0;
		    font-family: Helvetica,sans-serif;
		    height: 100%;
		    width: 100%;
		}

		body {
		    font: 12px/1.5 "Microsoft YaHei",tahoma,arial,Hiragino Sans GB,宋体;
		    height: 100%;
		    overflow: hidden;
		    position: relative;
		    width: 100%;
		    overflow-x: auto;
		    min-width: 1040px;
		    min-height: 570px;
		}
		body a{
			outline:none;
			blr:expression(this.onFocus=this.blur());
		}

		input:-webkit-autofill,
		textarea:-webkit-autofill,
		select:-webkit-autofill{
			background-color:transparent !important;
		    -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
		}
		.main{
			height: 100%;
			width: 100%;
			background-image: url('/img/login/bg.jpg');
		}
		.logo{
			height: 100px;
			width: 100%;
			background-image: url('/img/login/logo.png');
			background-repeat: no-repeat;
			background-position: 200px;
			background-size: 400px 80px;
		}
		.container{
			height: 434px;
			width: 100%;
			position: relative;
			background-image: url('/img/login/middle_bg.jpg');
			background-repeat: no-repeat;
			background-position: -610px center;
		}
		.wrap {
		    position: absolute;
		    text-align: left;
		    top: 100px;
		    right: 160px;
		    width: 357px;
		    height: 287px;
		    z-index: 2;
		    background-image: url('/img/login/kuang_nocode.png');
		    background-repeat: no-repeat;
		}

		.slogan {
		    display: inline-block;
		    height: 287px;
		    width: 357px;
		}
		.login-form{
			margin-top: 30px;
		}
		.login-form > div{
			position: relative;
			margin: 20px auto;
			height: 38px;
			width: 270px;
			border: 1px #4f7ea2 solid;
		}

		.iden_code{
			width: 170px!important;
			margin-left: 42px!important;
		}


		.login-form > div > input{
			border: #4f7ea2 1px solid;
			width: 258px;
			height: 36px;
			padding-left:10px;
		}

		.iden_code > input{
			width: 158px!important;
		}

		input::-ms-clear{display:none;}

		.login-form > div > span{
			display: block;
			position: absolute;
			left:10px;
			top:10px;
			color: #aaa;
		}
		.line{

		}
		.login-btn{
			text-align:center;
			line-height:36px;
			background-color: #144bff;
			color: #fff;
			letter-spacing: 6px;
			font-size: 18px;
			border-color: #144bff!important;
		}
		.login-btn:hover{
			cursor: pointer;
			background: rgba(52,186,255,0.34);
		}
		.container img{
			position: absolute;
			right: -100px;
			top: 2px;
			width: 90px;
		}
		.err-msg{
			position: relative;
			color: #9a0000;
			line-height: 20px;
		}
		.footer{
			text-align: center;
			color: #9a9a9a;
			margin-top: 20px;
		}
		.footer a {
			text-decoration:none;
		    background-image: url("/img/login/firefox.png");
		    background-position: 0 7px;
		    background-repeat: no-repeat;
		    background-size: 35% auto;
		    display: inline-block;
		    height: 60px;
		    padding-left: 30px;
		    margin-left: 5px;
		}
		.phone-num-div{
			/*position: absolute;
			top:35px;
			right:250px;*/
			margin: 35px 150px 0 0; 
			float: right;
		}
		.phone-img{
			background: url('/img/login/phone.png') no-repeat;
			height: 25px;
			width: 127px;
			background-size: 127px 25px;
		}
		.phone-num{
			color: #666;
			font-size: 16px;
			margin-left: -40px;
		}
	</style>
</head>
<body>

<div class="main">
	<div class="logo prel">
		<div class="phone-num-div">
			<div class="phone-img"></div>
			<div class="phone-num">83918282 | 83918292</div>
		</div>
	</div>
	<div class="container">
		<div class="wrap">
			<div class="slogan">
				<div class="login-form">
					<div style="top:6px;">
						<input type="text" id="user" autocomplete="off" placeholder="请输入您的帐号"/>
						<p class="err-msg"></p>
					</div>
					<div style="top:6px;">
						<input type="text" id="pwd" onpaste="return false;" oncopy="return false" placeholder="请输入您的密码"/>
						<p class="err-msg"></p>
					</div>

					<div class="login-btn" id="login_btn" style="top:6px;">
						登录
					</div>
					<p class="err-msg" style="text-align: center;margin: -15px 0 0 -8px;"></p>
				</div>
			</div>
		</div>
	</div>
	<div class="footer">
		<p>copyright©2014 | 中国北方工业公司 | 版权所有</p>
		<p style="line-height: 40px;">建议使用浏览器：<a id="firefox" href="/firfox.zip" target="_blank" style="color: #337de4">Firefox</a></p>
	</div>
</div>

</body>

<script type="text/javascript">

$(document).ready(function (){
	$("#user").focus();
	$("#user").val("");
	$("#pwd").val("");

	$("#pwd").click(function (){
		$("#pwd").attr("type" ,"password");
		$("#pwd").focus();
	});

	$("#pwd").focus(function (){
		$("#pwd").attr("type" ,"password");
	});

	$("#login_btn").click(function (){
		login();
	});

	$(document).keypress(function(event){  
	    var keycode = (event.keyCode ? event.keyCode : event.which);  
	    if(keycode == '13'){  
	        login();
	    }  
	});

	function login(){
		if ($("#login_btn").html() == "登录中...")
		{
			return false;
		}

		var username = $("#user").val();
		var pwd = $("#pwd").val();

		$("#user").next().text("");
		$("#pwd").next().text("");
		$("#login_btn").next().text("");

		if (!username.trim())
		{
			$("#user").next().text("请填写用户名");
			return false;
		}

		if (!pwd)
		{
			$("#pwd").next().text("请填写密码");
			return false;
		}

		$("#login_btn").html("登录中...");

		var obj = new Object();
		obj.username = username;
		obj.password = $.base64.encode($.md5(pwd));
		$.ajax({
			type : "POST",
			dataType: "json",
			url : index_web_app + "login",
			timeout : 120000,
			data:{param:JsonTools.encode(obj)},
			xhrFields: {
				withCredentials: true
			},
			success :function(data){
				if (data.resultCode == 0)
				{
					$("#login_btn").html("登录成功！");
					window.location.href = "/index.html";
				}
				else
				{
					$("#login_btn").next().text(data.resultMsg);
					$("#login_btn").html("登录");
				}
			},
			error :function(e){
				console.log(e);
				$("#login_btn").html("登录");
			}
		});
	}
});

</script>
</html>
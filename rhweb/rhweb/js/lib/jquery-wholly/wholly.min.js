/**
* @version 2.0.0
* @link https://github.com/gajus/wholly for the canonical source repository
* @license https://github.com/gajus/wholly/blob/master/LICENSE BSD 3-Clause
*/
"use strict";!function(e){var t,l=!1,a=[],o={};t={highlightHorizontal:null,highlightVertical:null},o.calcTableMaxCellLength=function(t){var l=0;return t.find("tr").each(function(){var t=o.calcRowCellLength(e(this));t>l&&(l=t)}),l},o.calcRowCellLength=function(t){var l=0;return t.find("td, th").each(function(){var t=parseInt(e(this).attr("colspan"),10)||1;l+=t}),l},o.generateTableMatrix=function(e){var t=o.calcTableMaxCellLength(e),a=e.find("tr").length;return l&&console.log("generateTableMatrix","width:",t,"height:",a),o.generateMatrix(t,a)},o.generateMatrix=function(e,t){for(var l=[];t--;)l.push(new Array(e));return l},o.indexTable=function(t){var a=o.generateTableMatrix(t),r=t.find("tr");return e.each(a,function(t){var o=r.eq(t),n=o.children(),i=0;l&&console.groupCollapsed("Table row.","y:",t,"columns.length:",n.length),e.each(a[t],function(e){var o,r,h,s,c=a[t][e];if(c)l&&console.log("x:",i,"cell:",c[0],"state: already indexed");else{for(c=n.eq(i++),o=parseInt(c.attr("colspan"),10)||1,r=parseInt(c.attr("rowspan"),10)||1,l&&(o>1||r>1?console.group("x:",e,"colspan:",o,"rowspan:",r,"cell:",c[0]):console.log("x:",e,"colspan:",o,"rowspan:",r,"cell:",c[0])),h=0;r>h;h++)for(s=0;o>s;s++)l&&console.log("relative row:",h,"relative cell:",s,"absolute row:",t+h,"absolute cell:",e+s),a[t+h][e+s]=c[0];(o>1||r>1)&&console.groupEnd()}c.data&&void 0===c.data("wholly.offsetInMatrix")&&c.data("wholly.offsetInMatrix",[e,t])}),l&&console.groupEnd()}),a},e.fn.wholly=function(r){this.each(function(){var n,i,h,s,c,g=e.extend({},t,r);if(-1!==e.inArray(this,a))return void(l&&console.warn("Wholly has been applied twice on the same table."));if(a.push(this),n=e(this),!n.is("table"))throw new Error("Wholly works only with tables.");i=o.indexTable(n),n.on("mouseenter","td, th",function(){var t=e(this),a=parseInt(t.attr("rowspan"),10)||1,o=parseInt(t.attr("colspan"),10)||1,r=t.data("wholly.offsetInMatrix");c(),h=e([]),s=e([]),e.each(i.slice(r[1],r[1]+a),function(e,t){h=h.add(t)}),e.each(i,function(e,t){s=s.add(t.slice(r[0],r[0]+o))}),l&&console.log("mouseenter","horizontal:",h.length,"vertical:",s.length),h.trigger("wholly.mouseenter-horizontal"),s.trigger("wholly.mouseenter-vertical"),g.highlightHorizontal&&h.addClass(g.highlightHorizontal),g.highlightVertical&&s.addClass(g.highlightVertical),n.trigger("wholly.mouseenter",{horizontal:h,vertical:s})}),c=function(){(h||s)&&(h.trigger("wholly.mouseleave-horizontal"),s.trigger("wholly.mouseleave-vertical"),g.highlightHorizontal&&h.removeClass(g.highlightHorizontal),g.highlightVertical&&s.removeClass(g.highlightVertical),n.trigger("wholly.mouseleave",{horizontal:h,vertical:s}),h=s=void 0)},n.on("mouseleave","td, th",c)})}}(jQuery);